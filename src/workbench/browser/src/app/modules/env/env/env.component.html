<div class="flex flex-col flex-1 env-main">
  <div class="flex items-center justify-between px-2 h-11 header">
    <span class="font-bold" i18n>Environment</span>
    <button eo-ng-button nzType="text" (click)="closeEnv()">
      <eo-iconpark-icon name="close"></eo-iconpark-icon>
    </button>
  </div>
  <div class="px-2 pt-2">
    <button eo-ng-button nzType="default" (click)="handleAddEnv()">
      <eo-iconpark-icon name="plus"></eo-iconpark-icon>
    </button>
  </div>
  <nz-divider></nz-divider>
  <div
    *ngFor="let item of envList"
    class="flex items-center justify-between px-2 py-1 env-item"
    (click)="handleEditEnv(item.uuid)"
  >
    <span class="flex-1 name">{{ item.name }}</span>
    <button
      eo-ng-button
      nzType="text"
      nz-popconfirm
      i18n-nzPopconfirmTitle
      nzPopconfirmTitle="Are you sure you want to delete?"
      (click)="$event.stopPropagation()"
      (nzOnConfirm)="handleDeleteEnv($event, item.uuid)"
      class="delete-btn"
    >
      <eo-iconpark-icon name="delete"> </eo-iconpark-icon>
    </button>
  </div>
</div>
<nz-modal [(nzVisible)]="isVisible" nzWidth="70%" [nzTitle]="modalTitle" (nzOnCancel)="handleCancel()">
  <section *nzModalContent class="flex">
    <div class="main-content">
      <form nz-form nzLayout="vertical">
        <nz-form-item>
          <nz-form-label nzFor="envInfo.name" i18n>Name</nz-form-label>
          <nz-form-control>
            <input eo-ng-input name="name" type="text" [(ngModel)]="envInfo.name" />
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzFor="envInfo.hostUri">Host</nz-form-label>
          <nz-form-control>
            <input eo-ng-input name="hostUri" type="text" [(ngModel)]="envInfo.hostUri" />
          </nz-form-control>
        </nz-form-item>
        <p class="mb-[8px]" i18n>
          Global variable: API Documentation/Test can use {{ varName }} to refer to the global variable
        </p>
        <eo-table
          [(model)]="envInfo.parameters"
          [columns]="envListColumns"
          [dataModel]="{ name: '', value: '', description: '' }"
        >
          <ng-template cell="action" let-scope="scope" let-index="index">
            <button eo-ng-button nzType="text">
              <eo-iconpark-icon name="delete" (click)="handleDeleteParams(index)"> </eo-iconpark-icon>
            </button>
          </ng-template>
        </eo-table>
      </form>
    </div>
  </section>
  <div *nzModalFooter class="px-2 footer">
    <button eo-ng-button nzType="default" (click)="handleCancel()" i18n>Cancel</button>
    <button eo-ng-button nzType="primary" (click)="handleSaveEnv(activeUuid)" i18n>Save</button>
  </div>
</nz-modal>
