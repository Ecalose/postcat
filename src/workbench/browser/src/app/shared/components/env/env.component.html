<div class="flex flex-col">
  <div class="flex items-center justify-between h-10 px-2 header">
    <span class="font-bold">Environment</span>
    <div
      class="flex items-center justify-center text-base btn shrink-0 h-7"
      (click)="handleAddEnv()"
      nz-tooltip
      nzTooltipTitle="New Environment"
    >
      <iconpark-icon name="plus"></iconpark-icon>
    </div>
  </div>
  <div
    *ngFor="let item of envList"
    class="flex items-center justify-between p-2 env-item"
    (click)="handleSwitchEnv(item.uuid)"
  >
    <span class="name">{{ item.name }}</span>
    <a nz-popconfirm nzPopconfirmTitle="是否确定删除?" (nzOnConfirm)="handleDeleteEnv(item.uuid)">
      <iconpark-icon name="delete"></iconpark-icon>
    </a>
  </div>
</div>
<nz-modal [(nzVisible)]="isVisible" nzWidth="70%" nzTitle="环境详情" (nzOnCancel)="handleCancel()">
  <section *nzModalContent class="flex">
    <div class="main-content">
      <form nz-form nzLayout="vertical">
        <nz-form-item>
          <nz-form-label nzFor="envInfo.name">环境名称</nz-form-label>
          <nz-form-control>
            <input nz-input name="name" type="text" [(ngModel)]="envInfo.name" />
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzFor="envInfo.hostUri">前置 URL</nz-form-label>
          <nz-form-control>
            <input nz-input name="hostUri" type="text" [(ngModel)]="envInfo.hostUri" />
          </nz-form-control>
        </nz-form-item>
        <p class="b-2">环境变量：在接口文档或测试的过程中，使用{{ varName }}即可引用该环境变量</p>
        <eo-table
          [(model)]="envInfo.parameters"
          [columns]="envListColumns"
          [dataModel]="{ name: '', value: '', description: '' }"
        >
          <ng-template cell="action" let-scope="scope" let-index="index">
            <iconpark-icon name="delete"></iconpark-icon>
          </ng-template>
        </eo-table>
      </form>
    </div>
  </section>
  <div *nzModalFooter class="px-2 footer">
    <button nz-button nzType="primary" (click)="handleSaveEnv(activeUuid)">保存</button>
    <button nz-button nzType="default" (click)="handleCancel()">取消</button>
  </div>
</nz-modal>
